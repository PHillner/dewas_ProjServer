{% extends 'template.html' %}
{% block content %}
    <div id="auction_info">
        <h1>{{ auction.name }}</h1>
        <small>
            Seller id: {{ auction.seller }}<br>
            Time posted: {{ auction.time }}
        </small>
        <p>Description:<br>
            {{ auction.description }}</p>
        <p id="auction"><b>Base price: </b>{{ auction.priceMin }}<br>
        <b>Due: </b>{{ auction.due }}</p>
    </div>
    {% if request.user.is_authenticated and request.user == auction.seller %}
        <table>
            <tr>
                <td>
                    <form method="get" action="/auction/{{ auction.id }}/edit/">
                        <button type="submit">Edit auction</button>
                    </form>
                </td>
                <td>
                    <form method="get" action="/auction/{{ auction.id }}/delete/">
                        <button type="submit">Delete auction</button>
                    </form>
                </td>
            </tr>
        </table>

    {% endif %}
    <br>
    {% if request.user.is_authenticated and request.user != auction.seller %}
    <form method="post" action="/bid/{{ auction.id }}/">
        {% csrf_token %}
        <table>
            <tr>
                <td><b>Bid amount:</b></td>
                <td><input type="text" name="price"></td>
            </tr>
            <tr>
                <td><input type="submit" value="Bid"></td>
                <td><input type="hidden" name="next" value="/auction/{{ auction.id }}/"></td>
            </tr>
        </table>
    </form>
    {% endif %}
    <div id="bids">
        {% for bid in bids %}
            <br>
            <div id="bid">
                <b>Bid amount: </b>{{ bid.price }}<br>
                <b>Time: </b>{{ bid.time }}<br>
            </div>
        {% empty %}
            Here would be the list of bids. Sadly, it now is empty.
        {% endfor %}
    </div>
{% endblock %}